import{r as u,o as k,c as r,a as o,b as p,w as m,v,d as S,t as i,F as c,e as d}from"./index-Be2ySoIg.js";import{a as w}from"./index-Dq7h7Pqt.js";const y={key:0},x={key:1},N={__name:"LoginPage",setup(L){const n=u(!1),s=u({}),a=u({username:"",password:""}),g=async()=>{try{const t=await w.post("/api/auth/login",a.value);console.log("response.data : ",t.data);const{token:e,user:l}=t.data;localStorage.setItem("authToken",e),localStorage.setItem("userInfo",JSON.stringify(l)),n.value=!0,s.value=l,a.value={username:"",password:""}}catch(t){console.error(t)}},f=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userInfo"),n.value=!1},I=()=>{const t=localStorage.getItem("authToken"),e=localStorage.getItem("userInfo");t&&e?(n.value=!0,s.value=JSON.parse(e)):(n.value=!1,s.value={})};return k(()=>{I()}),(t,e)=>(d(),r(c,null,[e[6]||(e[6]=o("h1",null,"Login 테스트",-1)),n.value?(d(),r("div",x,[e[5]||(e[5]=o("h1",null,"환영합니다.",-1)),o("p",null,[o("strong",null,"사용자명 : "+i(s.value.username),1)]),o("p",null,[o("strong",null,"이메일 : "+i(s.value.email),1)]),o("p",null,[o("strong",null,"권한 : "+i(s.value.roles),1)]),o("button",{onClick:f},"로그아웃")])):(d(),r("div",y,[o("form",{onSubmit:S(g,["prevent"])},[o("div",null,[e[2]||(e[2]=p(" username: ")),m(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>a.value.username=l)},null,512),[[v,a.value.username]])]),o("div",null,[e[3]||(e[3]=p(" password: ")),m(o("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=l=>a.value.password=l)},null,512),[[v,a.value.password]])]),e[4]||(e[4]=o("div",null,[o("button",{type:"submit"},"로그인")],-1))],32)]))],64))}};export{N as default};
